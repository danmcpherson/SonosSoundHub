name: sndctl
arch: "$ARCH"
platform: linux
version: "$VERSION"
section: utils
priority: optional
maintainer: Sound Control <noreply@example.com>
description: Self-hosted speaker control UI and API for Raspberry Pi
license: MIT
depends:
  - python3
  - python3-venv
  - pipx
  - jq
scripts:
  postinstall: packaging/postinstall.sh
contents:
  # Python application - preserve directory structure
  - src: "api-python/src/sndctl/**"
    dst: /opt/sndctl/src/sndctl
    type: file
  - src: "api-python/pyproject.toml"
    dst: /opt/sndctl/pyproject.toml
    type: file
  # Static web files
  - src: "wwwroot/**"
    dst: /opt/sndctl/wwwroot
    type: file
  # Data directory (macros)
  - src: "data/**"
    dst: /opt/sndctl/data
    type: config
  # Systemd service
  - src: "packaging/sndctl.service"
    dst: /etc/systemd/system/sndctl.service
    type: file
  # MCP Server for AI assistant integration
  - src: "sonos-mcp-server/pyproject.toml"
    dst: /opt/sndctl/sonos-mcp-server/pyproject.toml
    type: file
  - src: "sonos-mcp-server/README.md"
    dst: /opt/sndctl/sonos-mcp-server/README.md
    type: file
  - src: "sonos-mcp-server/src/sonos_mcp_server/**"
    dst: /opt/sndctl/sonos-mcp-server/src/sonos_mcp_server
    type: file
